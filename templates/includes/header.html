<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Your TailwindCSS Example Project">
  <title>Header Example</title>
  <!-- FontAwesome CDN Link -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />

  <!-- TailwindCSS CDN Link -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Hide the menu icon when the modal is open */
    .hide-menu-icon {
      display: none;
    }
  </style>
</head>
<body class="font-sans bg-gray-100">

  <!-- Main Container -->
  <div class="container mx-auto p-6">

    <!-- Header Section as div -->
    <div class="fixed top-2 left-2 right-2 bg-gray-200 p-4 border border-gray-400 flex justify-between items-center rounded-md z-10 lg:w-1/2 lg:left-1/2 lg:transform lg:-translate-x-1/2 lg:top-4" id="headerDiv">
      <button class="text-xl" id="menuButton">
        <i class="fas fa-bars" style="color: black;"></i> <!-- FontAwesome icon for hamburger menu -->
      </button>

      <div class="flex items-center space-x-4">
        <div class="relative flex items-center space-x-2">
          <div id="profileDropDown">
            <p class="text-xs font-semibold cursor-pointer">User Name</p>
            <p class="text-xs font-semibold text-gray-500">user@example.com</p>
          </div>

          <img src="https://icons-for-free.com/iff/png/256/profile+profile+page+user+icon-1320186864367220794.png" 
               alt="User Profile"
               class="h-10 w-10 rounded-full cursor-pointer">
        
          <div class="absolute top-12 right-0 bg-white shadow-lg rounded-lg border border-gray-300 w-56 p-4 hidden" id="dropdownMenu" role="menu">
            <div class="flex flex-col space-y-2">
              <div class="flex items-center space-x-2">
                <img src="https://icons-for-free.com/iff/png/256/profile+profile+page+user+icon-1320186864367220794.png"
                     alt="User Profile"
                     class="h-8 w-8 rounded-full">
                <div>
                  <p class="text-xs font-semibold">User Name</p>
                  <p class="text-xs text-gray-500">user@example.com</p>
                </div>
              </div>
              <a href="{% url 'web:profile' %}" class="w-full text-left py-1 px-3 rounded-md text-gray-700 hover:bg-gray-200">View Profile</a>
              <button class="w-full text-left py-1 px-3 rounded-md text-red-500 hover:bg-red-100">Sign Out</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for Mobile Menu -->
    <div class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-20 hidden" id="modalMenu">
      <div class="bg-white rounded-lg shadow-lg p-6 w-80 lg:w-[40%]">
        <h2 class="text-lg font-bold mb-4">Menu</h2>
        <nav class="flex flex-col space-y-4">
          <a href="{% url 'web:index' %}" class="text-gray-700 hover:bg-gray-200 p-2 rounded-md">Home</a>
          <a href="/about" class="text-gray-700 hover:bg-gray-200 p-2 rounded-md">About</a>
          <a href="{% url 'web:user_properties' %}" class="text-gray-700 hover:bg-gray-200 p-2 rounded-md">My Properties</a>
          <a href="/contact" class="text-gray-700 hover:bg-gray-200 p-2 rounded-md">Contact</a>
        </nav>
        <button class="mt-4 bg-blue-500 text-white py-2 px-4 rounded border border-gray-400" id="closeModalButton">Close Menu</button>
      </div>
    </div>
  </div>

  <script>
    // Get references to elements
    const menuButton = document.getElementById("menuButton");
    const modalMenu = document.getElementById("modalMenu");
    const closeModalButton = document.getElementById("closeModalButton");
    const headerDiv = document.getElementById("headerDiv");
    const profileImage = document.getElementById("profileDropDown");
    const dropdownMenu = document.getElementById("dropdownMenu");

    // Toggle modal visibility and hide/show the menu icon
    menuButton.addEventListener("click", function() {
      modalMenu.classList.remove("hidden");  // Show modal
      headerDiv.classList.add("hide-menu-icon");  // Hide menu icon
    });

    // Close modal when 'Close Menu' button is clicked
    closeModalButton.addEventListener("click", function() {
      modalMenu.classList.add("hidden");  // Hide modal
      headerDiv.classList.remove("hide-menu-icon");  // Show menu icon
    });

    // Toggle dropdown menu visibility when profile image is clicked
    profileImage.addEventListener("click", function(event) {
      event.stopPropagation(); // Prevent closing the dropdown when clicking inside
      dropdownMenu.classList.toggle("hidden"); // Toggle visibility of the dropdown menu
    });

    // Close dropdown menu if clicked outside
    document.addEventListener("click", function(event) {
      // Check if the click was outside the profile section and dropdown
      if (!profileImage.contains(event.target) && !dropdownMenu.contains(event.target)) {
        dropdownMenu.classList.add("hidden");  // Hide dropdown menu
      }
    });
  </script>

</body>
</html>
